---
layout: default
filename: l3.md
---
### Part 1
The full Grasshopper code, which is just referenced in parts below, can be found [here](https://github.com/melodyhsu47/CompFab-2025/blob/main/Melody_L3-3DPSlicerGcodeGenerator.gh).

#### Task 1: Creating the slicer
The custom slicer relies on a Python script to generate lines going in the y-axis spaced according to the Prusa MK4's specified extrusion width.

```
import numpy as np
import math
import rhinoscriptsyntax as rs
import ghpythonlib.treehelpers as th

def create_lines(x,y,spacing,z):
    # spacing is 1.2 * nozzle diameter
    layers = []
    heights = np.arange(0,z,0.3)
    xpoints = np.arange(x[0],x[1],spacing)
    for j in range(len(heights)):
        layer_lines = []
        for i in range(len(xpoints)):
            p1 = rs.AddPoint((xpoints[i],y[0],heights[j]))
            p2 = rs.AddPoint((xpoints[i],y[1],heights[j]))
            l = rs.AddLine(p1,p2)
            layer_lines.append(l)
        layers.append(layer_lines)
    return th.list_to_tree(layers)

lines = create_lines(x,y,spacing,z)
```
The Python script creates a list for *each layer*, and then returns a list of lists, where each layer corresponds to the lines for a particular layer.
The list of lists is returned as a tree object to make the rest of the operations more convenient - i.e., making sure that the perimeters are joined correctly to the lines.

<p float="left">
  <img src="assets/img/single_layer.png" width="48%" />
  <img src="assets/img/several_layers.png" width="48%" />
</p>


